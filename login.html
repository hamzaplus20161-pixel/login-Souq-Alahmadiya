<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ | Ø³ÙˆÙ‚ Ø§Ù„Ø£Ø­Ù…Ø¯ÙŠØ©</title>

<style>
@import url('https://fonts.googleapis.com/css2?family=Cairo:wght@500;700&display=swap');

*{
    margin:0; padding:0; box-sizing:border-box;
    font-family:'Cairo',sans-serif;
}
body{
    background:#f6f6f6;
    display:flex; justify-content:center; align-items:center;
    min-height:100vh; padding:20px;
}
.card{
    width:100%; max-width:420px;
    background:white; padding:30px;
    border-radius:14px; box-shadow:0 4px 20px #0002;
}
h2{
    text-align:center; color:#ff7a33;
    margin-bottom:25px; font-size:28px;
}
input{
    width:100%; padding:12px;
    border:1px solid #ccc; border-radius:8px;
    margin-bottom:12px; font-size:16px;
}
button{
    width:100%; padding:12px;
    background:#ff7a33; color:white;
    border:none; border-radius:8px;
    font-size:18px; font-weight:700;
    cursor:pointer; margin-top:8px;
}
button:hover{ background:#e56720; }

.msg{
    margin-top:15px; text-align:center;
    font-weight:600; color:#d33;
}
</style>
</head>

<body>

<div class="card">
    <h2>ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</h2>

    <input id="email" placeholder="Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ">
    <input id="password" type="password" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø±">

    <button onclick="login()">Ø¯Ø®ÙˆÙ„</button>

    <div class="msg" id="msg"></div>
</div>


<!-- Ø³ÙƒØ±ÙŠØ¨Øª Supabase -->
<script type="module">
import { createClient } from "https://esm.sh/@supabase/supabase-js@2";

const supabase = createClient(
 "https://nzdvboeaocarlcgoeixu.supabase.co",
 "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im56ZHZib2Vhb2NhcmxjZ29laXh1Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQ3NTI3NTAsImV4cCI6MjA4MDMyODc1MH0.mA-hf6902t2xLH_kUedHmy0sQrjGIAmoCqN2rHZ6K_E"
);


async function login(){

    let email = document.getElementById("email").value.trim();
    let password = document.getElementById("password").value.trim();
    let msg = document.getElementById("msg");

    msg.textContent = "";

    if(!email || !password){
        msg.textContent = "ÙŠØ±Ø¬Ù‰ Ù…Ù„Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª";
        return;
    }

    // ğŸ” Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙÙŠ Ø¬Ø¯ÙˆÙ„ users
    let { data, error } = await supabase
        .from("users")
        .select("*")
        .eq("email", email)
        .eq("password", password)
        .maybeSingle();

    if(error){
        msg.textContent = "Ø­Ø¯Ø« Ø®Ø·Ø£ØŒ Ø­Ø§ÙˆÙ„ Ù„Ø§Ø­Ù‚Ø§Ù‹";
        return;
    }

    if(!data){
        msg.textContent = "Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ØºÙŠØ± ØµØ­ÙŠØ­Ø©ØŒ Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰";
        return;
    }

    // ğŸ‘ Ø­ÙØ¸ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙÙŠ localStorage
    localStorage.setItem("user", JSON.stringify(data));

    // ğŸ‰ ØªØ­ÙˆÙŠÙ„ Ù„Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
    window.location.href = "HOME_PAGE_LINK";  // â† ØºÙŠÙ‘Ø± Ø¯Ù‡
}

</script>

</body>
</html>